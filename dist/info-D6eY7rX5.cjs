require(`./download.cjs`);let e=require(`url`),t=require(`axios`);const n=e=>{if(!(0,t.isAxiosError)(e))return e instanceof Error?e:Error(`Unknown error occurred`,{cause:e});let n=e;if(!n.response){let e=n.code,t=e===`ECONNABORTED`||e===`ETIMEDOUT`?`Request timeout. Please check your connection.`:e===`ERR_NETWORK`?`Network error. Please check your internet connection.`:e===`ERR_CANCELED`?`Request was canceled.`:`Request failed. Please try again.`;return Error(t,{cause:n})}let r=n.response.status,i;switch(r){case 400:i=`Bad request. Please check the parameters.`;break;case 401:i=`Authentication failed. Is your Client ID correct?`;break;case 403:i=`Access forbidden. You may not have permission to access this resource.`;break;case 404:i=`Resource not found. It may be private or the URL is incorrect.`;break;case 429:i=`Rate limit exceeded. Please wait before making more requests.`;break;case 500:case 502:case 503:case 504:i=`SoundCloud server error. Please try again later.`;break;default:i=`Request failed with status ${r}: ${n.message}`}return Error(i,{cause:n})},r=(t,...n)=>{try{let r=new e.URL(t);if(n.length%2!=0)throw Error(`Parameters must be provided in key-value pairs. Received ${n.length} parameters.`);for(let e=0;e<n.length;e+=2){let t=n[e],i=n[e+1];t&&i!=null&&r.searchParams.append(t,i)}return r.href}catch(e){throw e instanceof TypeError?Error(`Invalid URL: ${t}`,{cause:e}):e}},i=e=>{if(!e||typeof e!=`string`||!e.includes(`https://soundcloud.com/discover/sets/personalized-tracks::`))return``;let t=e.lastIndexOf(`:`);return t===-1?``:e.slice(t+1)},a=async(e,t,i,a,o)=>{let s=r(`https://api-v2.soundcloud.com/tracks`,`ids`,i.join(`,`),`client_id`,e);a&&o&&(s=r(s,`playlistId`,String(a),`playlistSecretToken`,o));try{let{data:e}=await t.get(s);return e}catch(e){throw n(e)}},o=async(e,t,i)=>{try{return(await i.get(r(`https://api-v2.soundcloud.com/resolve`,`url`,e,`client_id`,t),{withCredentials:!0})).data}catch(e){throw n(e)}},s=async(e,t,n)=>{let r=await o(e,t,n),i=r.tracks.map(e=>e.id),a=r.id,s=r.secret_token,l=r.tracks.filter(e=>!e.title);if(l.length===0)return r;let u=r.tracks.filter(e=>e.title),f=l.map(e=>e.id);if(f.length>50){let e=[];for(let t=0;t<f.length;t+=50)e.push(f.slice(t,t+50));let i=e.map(e=>d(t,n,e,a,s)),o=await Promise.all(i);r.tracks=u.concat(...o)}else{let e=await d(t,n,f,a,s);r.tracks=u.concat(e)}return r.tracks=c(r.tracks,i),r},c=(e,t)=>{let n=new Map;for(let t of e)n.set(t.id,t);let r=[];for(let e of t){let t=n.get(e);t&&r.push(t)}return r},l=async(e,t,n)=>{let r;if(e.includes(`https://soundcloud.com/discover/sets/personalized-tracks::`)){let a=i(e);if(!a)throw Error(`Could not parse track ID from given URL: `+e);let o=parseInt(a,10);if(isNaN(o))throw Error(`Could not parse track ID from given URL: `+e);let s=(await d(t,n,[o]))[0];if(!s)throw Error(`Could not find track with ID: `+o);r=s}else r=await o(e,t,n);if(!r.media)throw Error(`The given URL does not link to a Soundcloud track`);return r},u=async(e,t,n)=>{let r=await s(e,t,n);if(!r.tracks)throw Error(`The given URL does not link to a Soundcloud set`);return r},d=async(e,t,n,r,i)=>await a(e,t,n,r,i);Object.defineProperty(exports,`a`,{enumerable:!0,get:function(){return r}}),Object.defineProperty(exports,`i`,{enumerable:!0,get:function(){return d}}),Object.defineProperty(exports,`n`,{enumerable:!0,get:function(){return o}}),Object.defineProperty(exports,`o`,{enumerable:!0,get:function(){return n}}),Object.defineProperty(exports,`r`,{enumerable:!0,get:function(){return u}}),Object.defineProperty(exports,`t`,{enumerable:!0,get:function(){return l}});
//# sourceMappingURL=info-D6eY7rX5.cjs.map